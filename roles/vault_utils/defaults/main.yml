---
# defaults file for vault_utils
values_secret: "{{ lookup('env', 'HOME') }}/values-secret.yaml"
kubeconfig: "{{ lookup('env', 'KUBECONFIG') }}"
kubeconfig_backup: "{{ lookup('env', 'HOME') }}/.kube/config"
vault_ns: "vault"
vault_pod: "vault-0"
vault_hub: "hub"
vault_pvc: "data-vault-0"
vault_hub_kubernetes_host: https://$KUBERNETES_PORT_443_TCP_ADDR:443
# Needs extra escaping due to how it gets injected via shell in the vault
vault_hub_capabilities: '[\\\"read\\\"]'
vault_base_path: "secret"
vault_path: "{{ vault_base_path }}/{{ vault_hub }}"
vault_hub_ttl: "15m"
vault_spoke_capabilities: '[\\\"read\\\"]'
vault_spoke_ttl: "15m"
vault_global_policy: global
vault_global_capabilities: '[\\\"read\\\"]'
vault_pushsecrets_policy: pushsecrets
vault_pushsecrets_capabilities: '[\\\"create\\\",\\\"read\\\",\\\"update\\\",\\\"delete\\\"]'
legacy_external_secrets_ns: golang-external-secrets
legacy_external_secrets_sa: golang-external-secrets
legacy_external_secrets_secret: golang-external-secrets
external_secrets_ns: external-secrets
# The service account cannot be called "external-secrets" as that SA is used by the downstream ESO
external_secrets_sa: ocp-external-secrets
external_secrets_secret: ocp-external-secrets
unseal_secret: "vaultkeys"
unseal_namespace: "imperative"
vault_jwt_config: false
vault_jwt_roles: []

# Default policies that VP framework requires for hub-role
# Patterns can extend this list but these are always included
vault_hub_role_default_policies:
  - default
  - "{{ vault_global_policy }}-secret"
  - "{{ vault_pushsecrets_policy }}-secret"
  - "{{ vault_hub }}-secret"

# JWT auth policies for workloads needing direct Vault access
# List of {name: "policy-name", policy: "HCL policy content"}
vault_jwt_policies: []

# App-specific Vault policy configuration (vault_app_policies.yaml)
# List of app configs, each with 'prefix' and optional 'jwt_role' settings
# Example:
#   app_prefixes:
#     - prefix: apps/qtodo
#       jwt_role:
#         service_account_names: "qtodo-sa"
#         service_account_namespaces: "qtodo"
#         ttl: "15m"
#     - prefix: hub/infra/keycloak
app_prefixes: []
# Capabilities for app policies
app_capabilities: '[\"read\"]'
# Whether to update hub-role with new app policies
app_update_hub_role: true
# Whether to create JWT roles per app (only for entries with jwt_role defined)
app_create_jwt_roles: false
